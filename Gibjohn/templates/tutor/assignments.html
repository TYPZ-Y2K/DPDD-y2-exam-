{# templates/tutor/assignments.html #}
{% extends "base.html" %}
{% block title %}Assignments · Tutor{% endblock %}
{% block content %}
<h1>Assignments</h1>

<form method="POST" action="{{ url_for('tutor.assignments_create') }}" class="card">
{{ form.hidden_tag() }}
<div class="form-row">
<label>Title</label>
<input name="title" required>
</div>
<div class="form-row">
<label>Class</label>
<select name="class_id" required>  
</select>
</div>
<div class="form-row">
<label>Resource</label>
<select name="resource_id" required>
    <!-- likewise populate -->
</select>
</div>
<div class="form-row">
<label>Due date (optional)</label>
<input type="datetime-local" name="due_date">
</div>
<button class="btn btn-primary">Add assignment</button>
{% if not classes %}
<p class="muted">No classes yet. <a href="{{ url_for('tutor.new_class') }}">Create one</a>.</p>
{% endif %}
{% if not resources %}
<p class="muted">No resources yet. <a href="{{ url_for('tutor.resources') }}">Add resources</a>.</p>
{% endif %}
</form>

<div class="card">
<table class="table">
<thead>
    <tr><th>Title</th><th>Class</th><th>Due</th><th>Updated</th><th></th></tr>
</thead>
<tbody>
    {% for a in assignments %}
    <tr>
    <td>{{ a.title }}</td>
    <td>{{ a.class_id }}</td>
    <td>{{ a.due_date or '—' }}</td>
    <td>{{ a.updated_at }}</td>
    <td>
        <form method="POST" action="{{ url_for('tutor.assignments_delete', assignment_id=a.assignment_id) }}">
        {{ csrf_token() }}
        <button class="btn btn-ghost" onclick="return confirm('Delete this assignment?')">Delete</button>
        </form>
    </td>
    </tr>

    {% else %}
    <tr><td colspan="5">No assignments yet.</td></tr>
    {% endfor %}
</tbody>
</table>
</div>
{% endblock %}
